<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>字体子集化工具</title>
    <link rel="stylesheet" href="popup.css">
</head>
<body>
    <div class="container">
        <h1>字体子集化工具</h1>

        <div class="section">
            <h2>上传字体</h2>
            <div class="upload-area" id="upload-area">
                <input type="file" id="font-input" accept=".ttf,.otf,.woff,.woff2" style="display: none;">
                <div class="upload-placeholder" id="upload-placeholder">
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                        <polyline points="7 10 12 15 17 10"></polyline>
                        <line x1="12" y1="15" x2="12" y2="3"></line>
                    </svg>
                    <p>点击或拖拽字体文件</p>
                    <p class="small">TTF, OTF, WOFF, WOFF2</p>
                </div>
                <div class="file-info" id="file-info" style="display: none;">
                    <span class="file-name" id="file-name"></span>
                    <button class="btn-remove" id="remove-file">×</button>
                </div>
            </div>
        </div>

        <div class="combined-section" id="combined-section" style="display: none;">
            <!-- 预览区域 -->
            <div class="preview-area">
                <h3 class="preview-title">
                    <span class="preview-icon">🎨</span>
                    字体预览
                </h3>
                <div class="preview-text">
                    <p id="preview-sample">字体预览示例 Font Preview Sample</p>
                    <textarea id="custom-preview-text" placeholder="输入自定义文本..." rows="2"></textarea>
                </div>
            </div>

            <!-- 字符输入区域 -->
            <div class="char-input-area">
                <h3>保留字符</h3>
                <textarea id="char-input" placeholder="输入需要保留的字符..." rows="3"></textarea>

                <div class="input-area-footer">
                    <div class="input-stats">
                        <span>字符数：<span id="char-count">0</span></span>
                        <span>去重后：<span id="unique-count">0</span></span>
                    </div>
                    <button id="clear-chars" class="btn-clear">清空</button>
                </div>

                <!-- 快捷字符按钮 -->
                <div class="char-shortcuts">
                    <button class="char-btn" data-chars="0123456789">数字</button>
                    <button class="char-btn" data-chars="A-Z">大写</button>
                    <button class="char-btn" data-chars="a-z">小写</button>
                    <button class="char-btn" data-chars="常用汉字">常用</button>
                    <button class="char-btn" data-chars="，。、；：？！">中文</button>
                </div>
            </div>
        </div>

        <!-- 操作按钮区域 -->
        <div class="action-section">
            <button id="generate-subset" class="btn-primary" disabled>
                生成子集
            </button>

            <div class="output-info" id="output-info" style="display: none;">
                <span class="info-item">
                    <span class="label">原始</span>
                    <span id="original-size">-</span>
                </span>
                <span class="info-item">
                    <span class="label">子集</span>
                    <span id="subset-size">-</span>
                </span>
                <span class="info-item">
                    <span class="label">压缩</span>
                    <span id="compression-rate">-</span>
                </span>
            </div>
        </div>

        <!-- 下载区域 -->
        <div class="download-section" id="download-section" style="display: none;">
            <div class="format-selector">
                <label class="format-label" data-format="woff2">
                    <input type="radio" name="format" value="woff2" checked>
                    <div class="format-info">
                        <span class="format-name">WOFF2</span>
                        <small>体积最小</small>
                    </div>
                </label>
                <label class="format-label" data-format="woff">
                    <input type="radio" name="format" value="woff">
                    <div class="format-info">
                        <span class="format-name">WOFF</span>
                        <small>兼容性好</small>
                    </div>
                </label>
                <label class="format-label" data-format="ttf">
                    <input type="radio" name="format" value="ttf">
                    <div class="format-info">
                        <span class="format-name">TTF</span>
                        <small>通用格式</small>
                    </div>
                </label>
                <label class="format-label" data-format="otf">
                    <input type="radio" name="format" value="otf">
                    <div class="format-info">
                        <span class="format-name">OTF</span>
                        <small>高质量</small>
                    </div>
                </label>
            </div>
            <button id="download-subset" class="btn-download">
                下载 <span class="format-text">WOFF2</span> 文件
            </button>
        </div>
    </div>

    <!-- 主CDN -->
    <script src="https://unpkg.com/opentype.js@1.3.4/dist/opentype.min.js"></script>
    <script src="popup.js"></script>
</body>
</html>