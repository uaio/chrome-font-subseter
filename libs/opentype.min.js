// 这是 opentype.js 的最小版本
// 实际使用时请从 https://cdn.jsdelivr.net/npm/opentype.js@latest/dist/opentype.min.js 下载完整版本

(function() {
    'use strict';

    window.opentype = {
        parse: function(buffer) {
            // 简化的字体解析逻辑
            console.warn('使用的是 opentype.js 的简化版本，功能有限');

            // 返回模拟的字体对象
            return {
                names: {
                    fontFamily: { en: 'Font Subset' },
                    fontSubfamily: { en: 'Regular' }
                },
                unitsPerEm: 1000,
                ascender: 800,
                descender: -200,
                glyphs: {
                    get: function(index) {
                        return {
                            index: index,
                            name: '.notdef',
                            unicode: 0,
                            path: null
                        };
                    }
                },
                charToGlyphIndex: function(char) {
                    // 简单的字符到字形映射
                    return char.charCodeAt(0) || 0;
                }
            };
        },

        Font: function(options) {
            this.familyName = options.familyName;
            this.styleName = options.styleName;
            this.unitsPerEm = options.unitsPerEm;
            this.ascender = options.ascender;
            this.descender = options.descender;
            this.glyphs = options.glyphs || [];

            this.toArrayBuffer = function() {
                // 返回一个空的 ArrayBuffer
                // 实际的字体生成需要更复杂的逻辑
                return new ArrayBuffer(1024);
            };
        }
    };
})();